---
layout: blog
istop: true
title: "vim 入门"
category: 笔记
background-color: blue
tags:
- vim
---

摘自 [Linux vi/vim | 菜鸟教程 (runoob.com)](https://www.runoob.com/linux/linux-vim.html)

基本上 vi/vim 共分为三种模式，分别是**命令模式（Command mode）**，**输入模式（Insert mode）**和**底线命令模式（Last line mode）**。 

## 命令模式（一般模式）：

用户刚刚启动 vi/vim，便进入了命令模式。此状态下敲击键盘动作会被 Vim 识别为命令，而非输入字符。以下是常用的几个命令：

- `i` 切换到输入模式，以输入字符。
- `x` 删除当前光标所在处的字符。
- `:` 切换到底线命令模式，以在最底一行输入命令。

命令模式只有一些最基本的命令，因此仍要依靠底线命令模式输入更多命令。

一般模式按键说明：

| 按键                                     | 说明                                                         |
| ---------------------------------------- | ------------------------------------------------------------ |
| `h`、`j`、`k`、`l`或者左、下、上、右箭头 | 光标向左、下、上、右移动一个字符                             |
| `30j`                                    | 光标向下移动30行                                             |
| `Ctrl + f `/ `Ctrl + b`                  | 相当于 `Page Down` /`Page Up`                                |
| `Ctrl + d` / `Ctrl + u`                  | 屏幕 向下/向上 移动半页                                      |
| `H` / `M` / `L`                          | 光标移动到当前屏幕的最上/中间/最下那一行的第一个字符         |
| `G`                                      | 移动到当前档案的最后一行                                     |
| `20G`                                    | 移动到当前档案的第 20 行                                     |
| `gg`                                     | 相当于 `1G`                                                  |
| `/str` / `?str`                          | 向光标之后/之前寻找一个字符串"str"。例如要在档案内搜寻 vbird 这个字符串，就输入 /vbird |
| `n`                                      | 重复前一个搜寻的动作。如果刚刚执行 `/vbird` 向下搜寻 vbird ，则按下 n 后，会向下继续搜寻下一个 vbird。如果是执行 `?vbird` 的话，则会向上继续搜寻 vbird |
| N                                        | 反向进行前一个搜寻动作。 例如 `/vbird` 后，按下 `N` 则表示向上搜寻 vbird 。 |
| `:n1,n2s/word1/word2/g`                  | 在第 n1 与 n2 行之间寻找 word1 ，并将该字符串替换为 word2。<br />`:100,200s/vbird/VBIRD/g`：在 100 到 200 行之间搜寻 vbird 并替换为 VBIRD。<br />可用`$`取代n2，表示最后一行<br />`g` 后面可以再加一个 `c`，那么会在替换前要求用户确认（confirm） |
| `u`                                      | 复原前一个动作(undo)                                         |
| `Ctrl + r`                               | 重做上一个动作(redo）                                        |
| `.`                                      | 重复前一个动作                                               |
| `x` /  `X`                               | 向后/向前删除一个字符                                        |
| `nx`                                     | 连续向后删除 n 个字符                                        |
| `dd`                                     | 删除当前行                                                   |
| `ndd`                                    | 删除光标所在的向下 n 行                                      |
| `d1G`                                    | 删除光标所在到第一行的所有数据                               |
| `dG`                                     | 删除光标所在到最后一行的所有数据                             |
| `d$`                                     | 删除游标所在处，到该行的最后一个字符                         |
| `d0`                                     | 删除游标所在处，到该行的最前面一个字符                       |
| `yy`                                     | 复制当前行                                                   |
| `nyy`                                    | 复制光标所在的向下 n 行                                      |
| `p` / `P`                                | 将已复制的数据粘贴到光标下一行/上一行                        |
| `J`                                      | 将光标所在行与下一行的合并成同一行                           |

## 输入模式

在命令模式下按下 i 就进入了输入模式。在输入模式中，可以使用以下按键：

- **字符按键以及Shift组合**，输入字符
- **ENTER**，回车键，换行
- **BACK SPACE**，退格键，删除光标前一个字符
- **DEL**，删除键，删除光标后一个字符
- **方向键**，在文本中移动光标
- **HOME**/**END**，移动光标到行首/行尾
- **Page Up**/**Page Down**，上/下翻页
- **Insert**，切换光标为输入/替换模式，光标将变成竖线/下划线
- **ESC**，退出输入模式，切换到命令模式

## 底线命令模式

在命令模式下按下英文冒号 `:` 就进入了底线命令模式。底线命令模式可以输入单个或多个字符的命令，可用的命令非常多。按ESC键可随时退出底线命令模式。

底线命令模式常用命令：

| 命令                | 说明                                                      |
| ------------------- | --------------------------------------------------------- |
| `:w`                | 将编辑的数据写入硬盘档案中                                |
| `:w!`               | 若文件属性为只读时，强制写入                              |
| :q                  | 离开 vi                                                   |
| :q!                 | 若曾修改过档案，又不想储存，使用 ! 为强制离开不储存档案。 |
| `:w filename`       | 将编辑的数据储存成另一个档案（类似另存新档）              |
| `:! command`        | 暂时离开 vi 到命令行模式下执行 command 并显示结果         |
| `:set nu`           | 显示行号，设定之后，会在每一行的前缀显示该行的行号        |
| `:set nonu`         | 与 `set nu` 相反，为取消行号                              |
| `:r filename`       | 将 filename 这个档案内容加到游标所在行后面                |
| `:n1,n2 w filename` | 将 n1 到 n2 的内容储存成 filename 这个档案。              |

