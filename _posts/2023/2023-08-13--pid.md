---
layout: blog
istop: false
title: "PID 控制简介"
category: 笔记
background: blue
background-image: https://s2.loli.net/2024/06/15/sqVPIYWBxXQ8wna.jpg
tags:
- PID
- 自动驾驶
---

# 如何让一辆车保持匀速行驶？

朴素的想法是速度低了就加油，高了就刹车。还可以精细一点，速度离目标值差的越多，加油/刹车就越猛；越接近目标，加油/刹车就越慢。也就是说，控制力度和当前值与目标值的差值成比例关系。这就是**比例控制，让偏差（目标减去当前）与控制装置的输入建立一个一次函数的关系**。控制输入 kP 越大，调节作用越激进，反之越保守。 

现实世界中的系统总是会受到各种外界因素的影响。比如车辆速度会受到摩擦力、风速、上下坡等影响。如果撤去油门，车辆就会在外界影响下减速。按比例控制的方式，随着车速越来越接近目标值，控制输入越来越小。必然有一个状态，加油的效果与车辆减速的效果正好平衡，使得速度不再变化（此时还没有达到目标，因为比例控制还有输入）。

因此仅有比例控制，实际上是没法达到目标值的。可以设置一个积分量，**只要偏差存在，就不断对偏差进行积分（累加），并反应在控制输入上**。达到目标，积分值就不会再变动。这时，控制输入与外界因素的影响正好抵消（此时的输入是积分控制产生的，而不是比例控制）。

然而，外界影响往往是波动的，比如摩擦力、风速等，总是在变化。仅有比例控制和积分控制，实际上仍然无法让系统让车辆保持匀速，而是会在目标速度附近来回震荡。此时，我们可以观察车辆速度的变化率——加速度，只要车辆有了加速度，就像相反的方向施加作用，使其加速度趋近于0。**只要被控制的量有了速度，就向相反的反向用力，抑制其变化，使其变化速度趋近于0。这就是微分控制**。

# PID 控制

**比例（P）控制**：比例控制是一种最简单的控制方式。控制器的输出与偏差成比例关系。当仅有比例控制时系统输出存在稳态误差。

**积分（I）控制**：控制器的输出与偏差的积分成比例关系。对一个自动控制系统，如果在进入稳态后存在稳态误差，则称这个控制系统是有稳态误差的或简称有差系统。为了消除稳态误差，在控制器中必须引入“积分项”。积分项对误差取时间的积分，随着时间的增加，积分项会增大。这样，即便误差很小，积分项也会随着时间的增加而加大，它推动控制器的输出增大使稳态误差进一步减小，直到等于零。因此，比例+积分(PI)控制器，可以使系统在进入稳态后无稳态误差。

**微分（D）控制**：控制器的输出与输入偏差信号的微分（即偏差的变化率）成正比关系。

![qkimagesxdxkxdxk202007xdxk20200703-1-l.jpg](https://s2.loli.net/2024/06/15/sqVPIYWBxXQ8wna.jpg)

比例控制考虑当前的偏差，积分控制考虑过去的偏差，微分控制是考虑**将来**的偏差。这里的将来是指系统中存在较大惯性组件（环节）或有滞后组件，其变化总是落后于偏差当前的变化。

# 参考

[干货｜通俗易懂讲解PID](https://mp.weixin.qq.com/s?__biz=MjM5ODYyODM4Mg==&mid=2655806410&idx=3&sn=092a9433a16d7c0f77d0b714324f31b9&chksm=bd7f1ebb8a0897adc871ad4f821fbce6e8c402e5a4c62064629451382075ac7687ee32572f56&scene=27)


